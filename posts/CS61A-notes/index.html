<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="UCB CS61A Lecture Notes" /><meta name="author" content="Xiao Fan" /><meta property="og:locale" content="en_US" /><meta name="description" content="1 Introduction" /><meta property="og:description" content="1 Introduction" /><link rel="canonical" href="https://tommyfan34.github.io/posts/CS61A-notes/" /><meta property="og:url" content="https://tommyfan34.github.io/posts/CS61A-notes/" /><meta property="og:site_name" content="Xiao Fan (樊潇)" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-03-17T18:11:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="UCB CS61A Lecture Notes" /><meta name="twitter:site" content="@tommyfan34" /><meta name="twitter:creator" content="@Xiao Fan" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Xiao Fan"},"description":"1 Introduction","headline":"UCB CS61A Lecture Notes","url":"https://tommyfan34.github.io/posts/CS61A-notes/","@type":"BlogPosting","dateModified":"2021-03-17T18:12:09+08:00","datePublished":"2021-03-17T18:11:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://tommyfan34.github.io/posts/CS61A-notes/"},"@context":"https://schema.org"}</script><title>UCB CS61A Lecture Notes | Xiao Fan (樊潇)</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-FTKB0LQYH6"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-FTKB0LQYH6'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/sample/me.JPG" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Xiao Fan (樊潇)</a></div><div class="site-subtitle font-italic">Lots of hair | 低质量人类男性，新一线城市做题家，屎山代码制造机</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/tommyfan34" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/tommyfan34" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['tommyfanzju','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/xiao-fan-6a21b7171" aria-label="linkedin" class="order-6" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.facebook.com/tommyfanzju" aria-label="facebook" class="order-7" target="_blank" rel="noopener"> <i class="fab fa-facebook"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>UCB CS61A Lecture Notes</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>UCB CS61A Lecture Notes</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Mar 17, 2021, 6:11 PM +0800" > Mar 17, 2021 <i class="unloaded">2021-03-17T18:11:00+08:00</i> </span> by <span class="author"> Xiao Fan </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Mar 17, 2021, 6:12 PM +0800" > Mar 17, 2021 <i class="unloaded">2021-03-17T18:12:09+08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="7998 words">44 min</span></div></div><div class="post-content"><h1 id="1-introduction">1 Introduction</h1><p>本课程基于<em>Structure and Interpretation of Computer Programs</em> (SICP)。课程网址: <a href="https://inst.eecs.berkeley.edu/~cs61a/fa20/">https://inst.eecs.berkeley.edu/~cs61a/fa20/</a></p><h2 id="11-python-features">1.1 Python features</h2><p><strong>doctests</strong></p><p>在python的<code class="language-plaintext highlighter-rouge">def</code>关键词下的一行用<code class="language-plaintext highlighter-rouge">"""</code>包裹的文字是叫做<code class="language-plaintext highlighter-rouge">docstring</code>，用来解释这个函数所做的事情。在<code class="language-plaintext highlighter-rouge">docstring</code>中如果加入了<code class="language-plaintext highlighter-rouge">&gt;&gt;&gt;</code>，这就是<code class="language-plaintext highlighter-rouge">doctest</code>，用来测试函数的正确性，比如</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1"># ex.py
</span><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">floordiv</span><span class="p">,</span> <span class="n">mod</span>
<span class="k">def</span> <span class="nf">divide_exact</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
    <span class="s">"""Return the quotient and remainder of dividing N by D
    &gt;&gt;&gt; q, r = divide_exact(2013,10)
    &gt;&gt;&gt; q
    201
    &gt;&gt;&gt; r
    3
    """</span>
    <span class="k">return</span> <span class="n">floordiv</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">d</span><span class="p">),</span> <span class="n">mod</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
</pre></table></code></div></div><p>在shell中运行</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>python3 <span class="nt">-m</span> doctest ex.py
</pre></table></code></div></div><p>如果没有任何输出，说明结果正确，即q确实是201，r是3</p><p><strong>assert</strong></p><p>Python中的<code class="language-plaintext highlighter-rouge">assert</code>语法为后面跟一个condition，如果这个condition为false，则打印<code class="language-plaintext highlighter-rouge">AssertionError:&lt;some thing&gt;</code>，比如：</p><div class="language-c highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">assert</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="err">'</span><span class="n">a</span> <span class="n">must</span> <span class="n">greater</span> <span class="n">than</span> <span class="mi">0</span><span class="err">'</span>
</pre></table></code></div></div><p><strong>lambda function</strong></p><p>返回一个值为<code class="language-plaintext highlighter-rouge">function</code>的表达式，表达式中没有<code class="language-plaintext highlighter-rouge">return</code>关键字</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">square</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>
<span class="c1"># square is a function that takes in x and returns x * x
</span></pre></table></code></div></div><p>逆函数的实现：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">+</span> <span class="o">=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">x</span>
<span class="k">def</span> <span class="nf">inverse</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="s">"""return g(y) such that g(f(x)) = x"""</span>
    <span class="k">return</span> <span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">search</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="n">y</span><span class="p">)</span>
</pre></table></code></div></div><p><strong>conditional expression</strong></p><p><code class="language-plaintext highlighter-rouge">&lt;consequent&gt; if &lt;predicate&gt; else &lt;alternative&gt;</code></p><p>先判断<code class="language-plaintext highlighter-rouge">&lt;predicate&gt;</code>，如果为true，整个表达式的值就是<code class="language-plaintext highlighter-rouge">&lt;consequent&gt;</code>的值，否则是<code class="language-plaintext highlighter-rouge">&lt;alternative&gt;</code>的值。</p><p><strong>decorator</strong></p><p><code class="language-plaintext highlighter-rouge">@</code>是一个decorator，其作用是后面跟一个函数<code class="language-plaintext highlighter-rouge">fn1</code>，放在另一个函数<code class="language-plaintext highlighter-rouge">fn2</code>上方，等效于调用<code class="language-plaintext highlighter-rouge">fn2 = fn1(fn2)</code></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">trace1</span><span class="p">(</span><span class="n">fn</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">traced</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Calling'</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="s">'on argument'</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fn</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">traced</span>

<span class="o">@</span><span class="n">trace1</span>
<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">square</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">Calling</span> <span class="o">&lt;</span><span class="n">function</span> <span class="n">square</span> <span class="n">at</span> <span class="mh">0x1006ee170</span><span class="o">&gt;</span> <span class="n">on</span> <span class="n">argument</span> <span class="mi">2</span>
<span class="mi">4</span>
</pre></table></code></div></div><h2 id="12-higher-order-function">1.2 Higher order function</h2><p><strong>higher order function</strong></p><p>输入或者输出其中一个为函数的函数就是高次函数，比如</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">apply_twice</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">apply_twice</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">81</span>
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">make_adder</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">ader</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">k</span> <span class="o">+</span> <span class="n">n</span>
    <span class="k">return</span> <span class="n">adder</span>

<span class="n">add_three</span> <span class="o">=</span> <span class="n">make_adder</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">add_three</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># equals 7
</span></pre></table></code></div></div><p>注意，<code class="language-plaintext highlighter-rouge">add_three</code>这个函数是在<code class="language-plaintext highlighter-rouge">make_adder</code>中被创建的，因此它的parent frame是<code class="language-plaintext highlighter-rouge">make_adder</code>，因此可以访问到这个parent frame环境中的所有本地变量，包括n这个等于3的变量</p><p><strong>self reference</strong></p><p>函数可以返回自身，从而做到连续调用</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">print_sums</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">next_sum</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">print_sums</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">next_sum</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">print_sums</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">3</span><span class="p">)(</span><span class="mi">5</span><span class="p">)</span>
<span class="mi">1</span>
<span class="mi">4</span>
<span class="mi">9</span>
</pre></table></code></div></div><p><strong>curry</strong></p><p>柯里化：将一个需要接受多个参数的函数转换为接受一个参数并且返回<strong>[一个可以接受剩余参数并返回值的函数]</strong>的函数</p><p>3个<code class="language-plaintext highlighter-rouge">def</code>的嵌套可以用于构造一个构造函数</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">curry2</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">h</span>
    <span class="k">return</span> <span class="n">g</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span> <span class="o">=</span> <span class="n">curry2</span><span class="p">(</span><span class="n">add</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">add_three</span> <span class="o">=</span> <span class="n">m</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">add_three</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="mi">5</span>
<span class="c1"># 效果等同于
</span><span class="o">&gt;&gt;&gt;</span> <span class="n">curry</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></table></code></div></div><h2 id="13-environment-diagram">1.3 Environment Diagram</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/CS61A/image-20210304174130351.png" alt="image-20210304174130351" /></p><p>在global frame中，flip和flop分别被赋值给了<code class="language-plaintext highlighter-rouge">func flip</code>和<code class="language-plaintext highlighter-rouge">func flop</code>，因此第4个空格应该是</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">flip</span><span class="p">,</span> <span class="n">flop</span> <span class="o">=</span> <span class="n">flop</span><span class="p">,</span> <span class="n">flip</span>
</pre></table></code></div></div><p>f1 frame是flip，但是注意此时<code class="language-plaintext highlighter-rouge">func flip</code>在global frame中实际上是flop，因此第5个空格中应该是先调用了flop。f1传入的参数flop为1，即调用了<code class="language-plaintext highlighter-rouge">flop(1)</code>，后面flip赋值给了一个lambda函数，这个函数传入了参数flip，返回什么暂时不知道。在f2这个lambda函数中，可以看到传入的参数为2，返回了3，因此第3个空格应该是</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">flip</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">flip</span><span class="p">:</span> <span class="mi">3</span>
</pre></table></code></div></div><p>因为lambda函数是第2个被调用的，因此最后一个空格中在flop(1)之后一定还调用了一次，并且传入的参数为2，因此最后一个空格应该是<code class="language-plaintext highlighter-rouge">flop(1)(2)</code></p><p>接下来f3才是最后一行调用的flip(实际上是flop)函数，传入的参数为3（因为lambda函数的返回值为3）注意，f3的返回值在<code class="language-plaintext highlighter-rouge">flop</code>函数定义中是flop，但是因为f3的本地变量中实际上并没有flop（变量名<strong>不是</strong>本地变量），因此需要到parent环境中寻找flop，而parent环境也就是Global环境中的flop已经被定义为了<code class="language-plaintext highlighter-rouge">func flip</code>，因此返回值是flip函数，最后f4也调用了flip函数，传入的参数为3，但是返回值为None，说明第二个空格为None，前面的第一个空格要满足传入参数为1不满足，为3满足，可以是<code class="language-plaintext highlighter-rouge">flop &gt; 2</code>，最终答案如下</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/CS61A/image-20210304175437374.png" alt="image-20210304175437374" /></p><h1 id="2-recursion">2 Recursion</h1><h2 id="21-recursive-function">2.1 Recursive function</h2><p>递归函数是函数体中调用了自身的函数</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">split</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="s">"""Split a positive integer into all but its last digit and its last digit."""</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">10</span><span class="p">,</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">10</span>

<span class="k">def</span> <span class="nf">sum_digits</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="s">"""Return the sum of the digits of positive integer n.
    """</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">all_but_last</span><span class="p">,</span> <span class="n">last</span> <span class="o">=</span> <span class="n">split</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sum_digits</span><span class="p">(</span><span class="n">all_but_last</span><span class="p">)</span> <span class="o">+</span> <span class="n">last</span>
</pre></table></code></div></div><p>递归函数中一定要有一个判断条件用来判断base case，base case中不能包含递归调用，base case是递归的终点</p><p>验证递归函数正确性的方法：</p><ol><li>验证baseline是正确的<li>假设低一层次的函数调用<code class="language-plaintext highlighter-rouge">f(n-1)</code>正确，验证高一层次的函数调用<code class="language-plaintext highlighter-rouge">f(n)</code>是否正确</ol><h2 id="22-mutual-recursion">2.2 Mutual Recursion</h2><p>两个函数互相递归调用</p><p><strong>Luhn算法</strong></p><p>从一个数的最低位开始，每2位数数字×2，当乘后的结果大于10时，将个位和十位相加，最后将所有位的数字相加</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/CS61A/image-20210304194650788.png" alt="image-20210304194650788" /></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">luhn_sum</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="s">"""Return the digit sum of n computed by the Luhn algorithm.

    &gt;&gt;&gt; luhn_sum(2)
    2
    &gt;&gt;&gt; luhn_sum(12)
    4
    &gt;&gt;&gt; luhn_sum(42)
    10
    &gt;&gt;&gt; luhn_sum(138743)
    30
    &gt;&gt;&gt; luhn_sum(5105105105105100) # example Mastercard
    20
    &gt;&gt;&gt; luhn_sum(4012888888881881) # example Visa
    90
    &gt;&gt;&gt; luhn_sum(79927398713) # from Wikipedia
    70
    """</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">all_but_last</span><span class="p">,</span> <span class="n">last</span> <span class="o">=</span> <span class="n">split</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">luhn_sum_double</span><span class="p">(</span><span class="n">all_but_last</span><span class="p">)</span> <span class="o">+</span> <span class="n">last</span>

<span class="k">def</span> <span class="nf">luhn_sum_double</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="s">"""Return the Luhn sum of n, doubling the last digit."""</span>
    <span class="n">all_but_last</span><span class="p">,</span> <span class="n">last</span> <span class="o">=</span> <span class="n">split</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">luhn_digit</span> <span class="o">=</span> <span class="n">sum_digits</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">last</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">luhn_digit</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">luhn_sum</span><span class="p">(</span><span class="n">all_but_last</span><span class="p">)</span> <span class="o">+</span> <span class="n">luhn_digit</span>
</pre></table></code></div></div><h2 id="23-order-of-recursive-call">2.3 Order of Recursive call</h2><p><strong>Inverse Cascade</strong></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">inverse_cascade</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="s">"""Print an inverse cascade of prefixes of n.
    
    &gt;&gt;&gt; inverse_cascade(1234)
    1
    12
    123
    1234
    123
    12
    1
    """</span>
    <span class="n">grow</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">shrink</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">f_then_g</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">f</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="n">g</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="n">grow</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">f_then_g</span><span class="p">(</span><span class="n">grow</span><span class="p">,</span> <span class="k">print</span><span class="p">,</span> <span class="n">n</span><span class="o">//</span><span class="mi">10</span><span class="p">)</span>
<span class="n">shrink</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">f_then_g</span><span class="p">(</span><span class="k">print</span><span class="p">,</span> <span class="n">shrink</span><span class="p">,</span> <span class="n">n</span><span class="o">//</span><span class="mi">10</span><span class="p">)</span>
</pre></table></code></div></div><h2 id="24-tree-recursion">2.4 Tree Recursion</h2><p>一个函数体内有超过一次对该函数自身的调用</p><p><strong>斐波那契数列</strong></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="s">"""Compute the nth Fibonacci number.

    &gt;&gt;&gt; fib(8)
    21
    """</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/CS61A/image-20210304202224376.png" alt="image-20210304202224376" /></p><h2 id="25-example">2.5 Example</h2><p><strong>Coin split</strong></p><p>Given a positive integer <code class="language-plaintext highlighter-rouge">total</code>, a set of coins makes change for <code class="language-plaintext highlighter-rouge">total</code> if the sum of the values of the coins is <code class="language-plaintext highlighter-rouge">total</code>. Here we will use standard US Coin values: 1, 5, 10, 25 For example, the following sets make change for <code class="language-plaintext highlighter-rouge">15</code>:</p><ul><li>15 1-cent coins<li>10 1-cent, 1 5-cent coins<li>5 1-cent, 2 5-cent coins<li>5 1-cent, 1 10-cent coins<li>3 5-cent coins<li>1 5-cent, 1 10-cent coin</ul><p>Thus, there are 6 ways to make change for <code class="language-plaintext highlighter-rouge">15</code>. Write a recursive function <code class="language-plaintext highlighter-rouge">count_coins</code> that takes a positive integer <code class="language-plaintext highlighter-rouge">total</code> and returns the number of ways to make change for <code class="language-plaintext highlighter-rouge">total</code> using coins. Use the <code class="language-plaintext highlighter-rouge">next_largest_coin</code> function given to you to calculate the next largest coin denomination given your current coin. I.e. <code class="language-plaintext highlighter-rouge">next_largest_coin(5)</code> = <code class="language-plaintext highlighter-rouge">10</code>.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">next_largest_coin</span><span class="p">(</span><span class="n">coin</span><span class="p">):</span>
    <span class="s">"""Return the next coin. 
    &gt;&gt;&gt; next_largest_coin(1)
    5
    &gt;&gt;&gt; next_largest_coin(5)
    10
    &gt;&gt;&gt; next_largest_coin(10)
    25
    &gt;&gt;&gt; next_largest_coin(2) # Other values return None
    """</span>
    <span class="k">if</span> <span class="n">coin</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">5</span>
    <span class="k">elif</span> <span class="n">coin</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">10</span>
    <span class="k">elif</span> <span class="n">coin</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">25</span>


<span class="k">def</span> <span class="nf">count_coins</span><span class="p">(</span><span class="n">total</span><span class="p">):</span>
    <span class="s">"""Return the number of ways to make change for total using coins of value of 1, 5, 10, 25.
    &gt;&gt;&gt; count_coins(15)
    6
    &gt;&gt;&gt; count_coins(10)
    4
    &gt;&gt;&gt; count_coins(20)
    9
    &gt;&gt;&gt; count_coins(100) # How many ways to make change for a dollar?
    242
    &gt;&gt;&gt; from construct_check import check
    &gt;&gt;&gt; # ban iteration
    &gt;&gt;&gt; check(HW_SOURCE_FILE, 'count_coins', ['While', 'For'])                                          
    True
    """</span>
    <span class="s">"*** YOUR CODE HERE ***"</span>
    <span class="k">def</span> <span class="nf">helper</span><span class="p">(</span><span class="n">lowest</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">lowest</span> <span class="o">==</span> <span class="bp">None</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">lowest</span> <span class="o">==</span> <span class="n">n</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">lowest</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="n">with_coin</span> <span class="o">=</span> <span class="n">helper</span><span class="p">(</span><span class="n">lowest</span><span class="p">,</span> <span class="n">n</span> <span class="o">-</span> <span class="n">lowest</span><span class="p">)</span>
        <span class="n">without_coin</span> <span class="o">=</span> <span class="n">helper</span><span class="p">(</span><span class="n">next_largest_coin</span><span class="p">(</span><span class="n">lowest</span><span class="p">),</span> <span class="n">n</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">with_coin</span> <span class="o">+</span> <span class="n">without_coin</span>
    <span class="k">return</span> <span class="n">helper</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span>
</pre></table></code></div></div><p><strong>Maximum Subsequence</strong></p><p>A subsequence of a number is a series of (not necessarily contiguous) digits of the number. For example, 12345 has subsequences that include 123, 234, 124, 245, etc. Your task is to get the maximum subsequence below a certain length.</p><p>There are two key insights for this problem:</p><ul><li>You need to split into the cases where the ones digit is used and the one where it is not. In the case where it is, we want to reduce <code class="language-plaintext highlighter-rouge">t</code> since we used one of the digits, and in the case where it isn’t we do not.<li>In the case where we are using the ones digit, you need to put the digit back onto the end, and the way to attach a digit <code class="language-plaintext highlighter-rouge">d</code> to the end of a number <code class="language-plaintext highlighter-rouge">n</code> is <code class="language-plaintext highlighter-rouge">10 * n + d</code>.</ul><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">max_subseq</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="s">"""
    Return the maximum subsequence of length at most t that can be found in the given number n.
    For example, for n = 20125 and t = 3, we have that the subsequences are
        2
        0
        1
        2
        5
        20
        21
        22
        25
        01
        02
        05
        12
        15
        25
        201
        202
        205
        212
        215
        225
        012
        015
        025
        125
    and of these, the maxumum number is 225, so our answer is 225.
    &gt;&gt;&gt; max_subseq(20125, 3)
    225
    &gt;&gt;&gt; max_subseq(20125, 5)
    20125
    &gt;&gt;&gt; max_subseq(20125, 6) # note that 20125 == 020125
    20125
    &gt;&gt;&gt; max_subseq(12345, 3)
    345
    &gt;&gt;&gt; max_subseq(12345, 0) # 0 is of length 0
    0
    &gt;&gt;&gt; max_subseq(12345, 1)
    5
    """</span>
    <span class="s">"*** YOUR CODE HERE ***"</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">t</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="n">with_ones</span> <span class="o">=</span> <span class="n">max_subseq</span><span class="p">(</span><span class="n">n</span><span class="o">//</span><span class="mi">10</span><span class="p">,</span> <span class="n">t</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="n">n</span><span class="o">%</span><span class="mi">10</span>
    <span class="n">not_with</span> <span class="o">=</span> <span class="n">max_subseq</span><span class="p">(</span><span class="n">n</span><span class="o">//</span><span class="mi">10</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">with_ones</span> <span class="o">&gt;</span> <span class="n">not_with</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">with_ones</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">not_with</span>

</pre></table></code></div></div><h1 id="3-container--iterator">3 Container &amp; Iterator</h1><h2 id="31-list">3.1 List</h2><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">odds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">41</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">49</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">odds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="mi">41</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">odds</span><span class="p">)</span>
<span class="mi">4</span>
<span class="c1"># concatenation and repetition
</span><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="n">odds</span> <span class="o">*</span> <span class="mi">2</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">49</span><span class="p">]</span>
<span class="c1"># nested lists
</span><span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="mi">30</span>
</pre></table></code></div></div><p><strong>for</strong></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">for</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">suite</span><span class="o">&gt;</span>
</pre></table></code></div></div><p>首先判断<expression>是否为一个可以迭代的值，然后将<name>和每一个这个<expression>中的元素依次绑定，并执行<suite></suite></expression></name></expression></p><p><strong>range</strong></p><p><code class="language-plaintext highlighter-rouge">range</code>是一个连续整数的范围，也是一个可以迭代的值，比如</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>  <span class="c1"># list constructor
</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> 
</pre></table></code></div></div><p><strong>list comprehension</strong></p><p>列表推导式：<code class="language-plaintext highlighter-rouge">[output_expression() for(iterable value) if (conditional filter)]</code></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">odds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">odds</span> <span class="k">if</span> <span class="mi">25</span> <span class="o">%</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></table></code></div></div><h2 id="32-dictionary">3.2 Dictionary</h2><p><code class="language-plaintext highlighter-rouge">{'key1': val1, 'key2': val2, 'key3': val3}</code></p><p>字典的key之间是没有顺序的，且不能有相同的key，且key不能是一个list</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">numerals</span> <span class="o">=</span> <span class="p">{</span><span class="s">'I'</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">'V'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s">'X'</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">numerals</span><span class="p">[</span><span class="s">'I'</span><span class="p">]</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">numerals</span><span class="p">.</span><span class="n">key</span><span class="p">()</span>
<span class="n">dict_keys</span><span class="p">([</span><span class="s">'X'</span><span class="p">,</span> <span class="s">'V'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">numerals</span><span class="p">.</span><span class="n">items</span><span class="p">()</span>
<span class="n">dict_items</span><span class="p">([(</span><span class="s">'X'</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="s">'V'</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="s">'I'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'X'</span> <span class="ow">in</span> <span class="n">numerals</span>
<span class="bp">True</span>
</pre></table></code></div></div><h2 id="33-iterator">3.3 Iterator</h2><p><code class="language-plaintext highlighter-rouge">iter(iterable)</code>：返回一个迭代器</p><p><code class="language-plaintext highlighter-rouge">next(iterator)</code>：返回迭代器中指向的下一个元素</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="mi">4</span>
</pre></table></code></div></div><p>字典也可以进行迭代</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">'one'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'two'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'three'</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="p">[</span><span class="s">'zero'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">k</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">d</span><span class="p">.</span><span class="n">keys</span><span class="p">())</span> <span class="c1"># ir iter(d)
</span><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
<span class="s">'one'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">d</span><span class="p">.</span><span class="n">values</span><span class="p">())</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">i</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">d</span><span class="p">.</span><span class="n">items</span><span class="p">())</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="p">(</span><span class="s">'one'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></table></code></div></div><p>如果字典的大小在迭代过程中被改变，则这个迭代器<strong>不能</strong>继续被使用</p><p><strong>for in iterator</strong></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">r</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ri</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ri</span><span class="p">:</span>
<span class="p">...</span> 	<span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="mi">3</span>
<span class="mi">4</span>
<span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ri</span><span class="p">:</span>
<span class="p">...</span> 	<span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></table></code></div></div><p>迭代器在迭代一遍后再用<code class="language-plaintext highlighter-rouge">for</code>迭代一遍，将不会重新开始</p><h2 id="34-generator">3.4 Generator</h2><p>Generator函数是一个可以<code class="language-plaintext highlighter-rouge">yield</code>而非<code class="language-plaintext highlighter-rouge">return</code>值的函数，一个正常的函数只能<code class="language-plaintext highlighter-rouge">return</code>一次，但是一个generator可以<code class="language-plaintext highlighter-rouge">yield</code>多次</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">plus_minus</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="p">...</span> 	<span class="k">yield</span> <span class="n">x</span>
<span class="p">...</span> 	<span class="k">yield</span> <span class="o">-</span><span class="n">x</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">plus_minus</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="o">-</span><span class="mi">3</span>
<span class="c1"># plus_minus executed only when next is called
</span></pre></table></code></div></div><p>generator是一个特殊的iterator</p><p><code class="language-plaintext highlighter-rouge">yield from</code>可以从一个iterable中<code class="language-plaintext highlighter-rouge">yield</code>所有值，比如</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">a_then_b</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">x</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">b</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">x</span>
<span class="c1"># 与以下函数等价
</span><span class="k">def</span> <span class="nf">a_then_b</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">yield</span> <span class="k">from</span> <span class="n">a</span>
    <span class="k">yield</span> <span class="k">from</span> <span class="n">b</span>
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">countdown</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">k</span>
        <span class="k">yield</span> <span class="k">from</span> <span class="n">countdown</span><span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">countdown</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="mi">1</span>
</pre></table></code></div></div><h2 id="34-built-in-functions-for-iteration">3.4 Built-in Functions for iteration</h2><p>返回一个迭代器的函数：</p><ul><li><code class="language-plaintext highlighter-rouge">map(func, iterable)</code>：对iterable中的x进行f(x)迭代<li><code class="language-plaintext highlighter-rouge">filter(func, iterable)</code>：在func(x)==True的情况下对iterable中的x进行迭代<li><code class="language-plaintext highlighter-rouge">zip（first_iter, second_iter)</code>：返回一个同时迭代两个可迭代对象的迭代器，next的返回对象是一个包含这两个可迭代对象元素的元组</ul><h1 id="4-mutable-objects">4 Mutable Objects</h1><p>mutable对象可以被改变，比如list、dictionary和set</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">suits</span> <span class="o">=</span> <span class="p">[</span><span class="s">'coin'</span><span class="p">,</span> <span class="s">'string'</span><span class="p">,</span> <span class="s">'myriad'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">original_suits</span> <span class="o">=</span> <span class="n">suits</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">suit</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
<span class="s">'myriad'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">suits</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="s">'string'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">suits</span>
<span class="p">[</span><span class="s">'coin'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">suits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">'cup'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">suits</span><span class="p">.</span><span class="n">extend</span><span class="p">([</span><span class="s">'sword'</span><span class="p">,</span> <span class="s">'club'</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">suits</span>
<span class="p">[</span><span class="s">'coin'</span><span class="p">,</span> <span class="s">'cup'</span><span class="p">,</span> <span class="s">'sword'</span><span class="p">,</span> <span class="s">'club'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">original_suits</span>
<span class="p">[</span><span class="s">'coin'</span><span class="p">,</span> <span class="s">'cup'</span><span class="p">,</span> <span class="s">'sword'</span><span class="p">,</span> <span class="s">'club'</span><span class="p">]</span>  <span class="c1"># 2个名称指向了同一个对象，对对象的改变可以在这两个名称中被反映
</span></pre></table></code></div></div><p>而不可变对象包括int、string、float、tuple等</p><p>Python中的变量存放的是对象引用，变量是没有类型的，可以存放任意类型的对象，因此Python实际上是一个弱类型语言。本质上，Python的变量都是指向内存对象的一个指针。不可变对象类型又叫做<strong>值类型</strong>，本身不能够被修改，数值的修改实际上让变量指向了一个新的对象，旧的对象被python的gc回收</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">a</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># a指向的对象由1这个对象变成了2这个对象
</span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>   <span class="c1"># b此时指向的对象和a是一样的，都是2这个对象（在heap中同样数值的对象只有1个）
</span></pre></table></code></div></div><p>而可变类型是<strong>引用类型</strong>，本身允许修改</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>   <span class="c1"># 这两个a指向的对象是不同的，也就是说不同的可变类型对象可以拥有同样的数值
</span></pre></table></code></div></div><p>当对可变类型对象进行新的赋值操作时，创建了新的对象，而进行<code class="language-plaintext highlighter-rouge">.append</code>这样的操作，是对原来的对象进行了修改</p><h2 id="41-tuples">4.1 Tuples</h2><p>元组是一组数列，<strong>不能</strong>改变，因此可以作为字典的键（list不能作为字典的键）</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">tuple</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></table></code></div></div><p>但是如果元组中包含了一个list，可以通过改变这个list来改变元组</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">3</span> <span class="p">)</span>
</pre></table></code></div></div><h2 id="42-identity-operator">4.2 Identity Operator</h2><p><code class="language-plaintext highlighter-rouge">&lt;exp0&gt; is &lt;exp1&gt;</code> 如果<code class="language-plaintext highlighter-rouge">&lt;exp1&gt;</code>和<code class="language-plaintext highlighter-rouge">&lt;exp0&gt;</code>指向同一个对象，则返回True</p><h2 id="43-mutable-default-argument">4.3 Mutable default argument</h2><p>如果一个函数的默认参数是一个可变对象，那么是非常危险的</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="p">[]):</span>
	<span class="n">s</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>   
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">()</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">()</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">()</span>
<span class="mi">3</span>
</pre></table></code></div></div><p>上述例子是因为，默认参数s=[]将其绑定到了同一个对象上，每次调用<code class="language-plaintext highlighter-rouge">f()</code>都会对同一个对象进行<code class="language-plaintext highlighter-rouge">append</code></p><h2 id="44-list-operation-anatomy">4.4 List Operation Anatomy</h2><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">t</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></table></code></div></div><ul><li><p>append：</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span>
<span class="mi">0</span>
</pre></table></code></div></div><p>注意：append的元素并不是指向t这个名称，而是被evaluate之后的那个[5, 6]对象，因此改变t之后并不会改变s</p><li><p>extend</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</pre></table></code></div></div><p>extend是将t中的所有元素的值加到s中，也不是指向t这个名称，因此改变t之后也不会改变s</p><li><p>addition &amp; slicing</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="p">[</span><span class="n">t</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
</pre></table></code></div></div><p>addition会新建一个指向原来List的对象，[t]表示的是新建一个list，这个list包含了t，因此a是一个3个元素的list，前2个是2和3，第三个指向了list t，因此改变b[1][1]会改变t</p><li><p>list()</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</pre></table></code></div></div><p>list是将s中的元素拷贝到一个新建的list中去，因此改变s不会改变t</p></ul><h2 id="45-mutable-functions">4.5 Mutable Functions</h2><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">make_withdraw</span><span class="p">(</span><span class="n">balance</span><span class="p">):</span>
    <span class="s">"""Return a withdraw function with a starting balance."""</span>
    <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="n">amount</span><span class="p">):</span>
        <span class="k">nonlocal</span> <span class="n">balance</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="n">balance</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">'Insufficient funds'</span>
        <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">-</span> <span class="n">amount</span>
        <span class="k">return</span> <span class="n">balance</span>
    <span class="k">return</span> <span class="n">withdraw</span>
</pre></table></code></div></div><p>在高阶函数中定义了一个<code class="language-plaintext highlighter-rouge">withdraw</code>函数，这个函数中定义了一个<code class="language-plaintext highlighter-rouge">nonlocal</code>变量<code class="language-plaintext highlighter-rouge">balance</code>，当对<code class="language-plaintext highlighter-rouge">balance</code>进行重新赋值时，这个<code class="language-plaintext highlighter-rouge">balance</code>指向的是parent frame中的<code class="language-plaintext highlighter-rouge">balance</code>。注意，<code class="language-plaintext highlighter-rouge">balance</code>必须被在<strong>除了当前frame之外</strong>的其他parent frame中被绑定</p><p>如果没有这个<code class="language-plaintext highlighter-rouge">nonlocal</code>声明，上述代码将会出现<code class="language-plaintext highlighter-rouge">referenced before assignment</code>报错，因为Python不允许修改其他frame中的变量（但是可以访问）</p><p>除了<code class="language-plaintext highlighter-rouge">nonlocal</code>声明之外，还可以用Mutable value来实现mutable function</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">make_withdraw_list</span><span class="p">(</span><span class="n">balance</span><span class="p">):</span>
    <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">balance</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="n">amount</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="s">'Insufficient funds'</span>
        <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">amount</span>
        <span class="k">return</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">withdraw</span>
</pre></table></code></div></div><p>这里在<code class="language-plaintext highlighter-rouge">withdraw</code>中，实际上并没有改变b的binding，而是改变了b这个mutable list中的一个值，从而实现了间接修改<code class="language-plaintext highlighter-rouge">balance</code>，由于对Python而言b指向的对象并没有改变，只是对象中的值变了，这是合法的。</p><h1 id="5-object-oriented-programming">5 Object-Oriented Programming</h1><h2 id="51-class">5.1 Class</h2><p>类是其所有实例的模板，每个类中有很多属性和方法</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="err">&lt;</span><span class="nc">name</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">suite</span><span class="o">&gt;</span>
</pre></table></code></div></div><p><strong>类构造器</strong></p><p>类的<code class="language-plaintext highlighter-rouge">__init__</code>方法在用该类创建实例时被调用，第一个参数是<code class="language-plaintext highlighter-rouge">self</code>，用来指向这个被创建的实例，也可以加入其他的参数</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Account</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_holder</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">holder</span> <span class="o">=</span> <span class="n">account_holder</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Account</span><span class="p">(</span><span class="s">'Jim'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">holder</span>
<span class="s">'Jim'</span>
</pre></table></code></div></div><p><strong>方法</strong></p><p>方法是定义于类中的函数，使用<code class="language-plaintext highlighter-rouge">obj.method()</code>进行调用，传入的第一个参数是<code class="language-plaintext highlighter-rouge">self</code>，这个参数在调用时不需要写入</p><p><strong>属性</strong></p><p>可以通过<code class="language-plaintext highlighter-rouge">.</code>或者<code class="language-plaintext highlighter-rouge">getattr</code>来访问属性</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">a</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">'attr'</span><span class="p">)</span>
</pre></table></code></div></div><p>除了实例的属性之外，类本身也可以有属性</p><p>如果一个实例没有对应的属性，但是直接对这个属性进行赋值，会在该实例上加上该属性（注意：不是在类上加属性）</p><h2 id="52-inheritance">5.2 Inheritance</h2><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="err">&lt;</span><span class="nc">name</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">base</span> <span class="n">class</span><span class="o">&gt;</span><span class="p">):</span>
    <span class="o">&lt;</span><span class="n">suite</span><span class="o">&gt;</span>
</pre></table></code></div></div><p>新的子类将从父类继承所有属性，也可以覆盖继承来的属性，在子类中重新定义原先的方法覆盖继承来的方法，但是还可以在父类中访问原来的属性或方法。</p><p>当查找一个类中的名称时，如果这个名称是在当前类中的，就返回这个类中的名称的值，否则查找父类中是否有这个名称</p><p><strong>example</strong></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="n">z</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">B</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    
<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">y</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">f</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">C</span><span class="p">(</span><span class="n">y</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">B</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="p">.</span><span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>
<span class="o">-----------</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">C</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="n">n</span>
<span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">z</span> <span class="o">==</span> <span class="n">C</span><span class="p">.</span><span class="n">z</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">z</span> <span class="o">==</span> <span class="n">b</span><span class="p">.</span><span class="n">z</span>
<span class="bp">False</span>
</pre></table></code></div></div><p>以下哪个表达式为整数？</p><p>b.z</p><p>b.z.z</p><p><strong>b.z.z.z</strong></p><p>b.z.z.z.z</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/CS61A/image-20210309103439570.png" alt="image-20210309103439570" /></p><h2 id="53-multiple-inheritance">5.3 Multiple inheritance</h2><p>当一个子类继承了多个父类，就是多继承，当两个父类有相同的属性时，按照传入的父类参数从左向右查找，返回的属性是最先查找到的那个父类的属性</p><p>注意：多继承可能造成很大程度上的复杂性，因此应该注意减少多继承的使用</p><h2 id="54-representation">5.4 Representation</h2><p><code class="language-plaintext highlighter-rouge">repr()</code>将对象转化为供解释器读取的形式，可以用<code class="language-plaintext highlighter-rouge">eval</code>还原对象</p><p><code class="language-plaintext highlighter-rouge">obj == eval(repr(obj))</code></p><p><code class="language-plaintext highlighter-rouge">str()</code>转化为人类可读的字符串类型</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s">'Hello'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="s">"'Hello'"</span>
</pre></table></code></div></div><p><strong>Polymorphic Function</strong></p><p>可以对多种形式的数据进行应用的函数</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">repr</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">).</span><span class="n">__repr__</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">repr()</code>直接查找了class attribute中的<code class="language-plaintext highlighter-rouge">__repr__</code>函数而不是instance attribute</p><h1 id="6-data">6 Data</h1><h2 id="61-linked-list">6.1 Linked List</h2><p>链表是一个pair，包括了一个值和下一个链表</p><p><code class="language-plaintext highlighter-rouge">Link(3, Link(4, Link(5, Link.empty)))</code>，<code class="language-plaintext highlighter-rouge">Link.empty</code>可以省略</p><p>3-&gt;4-&gt;5-&gt;empty</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Link</span><span class="p">:</span>
    <span class="n">empty</span> <span class="o">=</span> <span class="p">()</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">rest</span><span class="o">=</span><span class="n">empty</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">rest</span> <span class="ow">is</span> <span class="n">Link</span><span class="p">.</span><span class="n">empty</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rest</span><span class="p">,</span> <span class="n">Link</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">first</span> <span class="o">=</span> <span class="n">first</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">rest</span> <span class="o">=</span> <span class="n">rest</span>
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">range_link</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
    <span class="s">"""Return a Link containing consecutive integers from start to end.

    &gt;&gt;&gt; range_link(3, 6)
    Link(3, Link(4, Link(5)))
    """</span>
    <span class="k">if</span> <span class="n">start</span> <span class="o">&gt;=</span> <span class="n">end</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Link</span><span class="p">.</span><span class="n">empty</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Link</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">range_link</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">end</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">map_link</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
    <span class="s">"""Return a Link that contains f(x) for each x in Link s.

    &gt;&gt;&gt; map_link(square, range_link(3, 6))
    Link(9, Link(16, Link(25)))
    """</span>
    <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="n">Link</span><span class="p">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">s</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Link</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">first</span><span class="p">),</span> <span class="n">map_link</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">rest</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">filter_link</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
    <span class="s">"""Return a Link that contains only the elements x of Link s for which f(x)
    is a true value.

    &gt;&gt;&gt; filter_link(odd, range_link(3, 6))
    Link(3, Link(5))
    """</span>
    <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="n">Link</span><span class="p">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">s</span>
    <span class="n">filtered_rest</span> <span class="o">=</span> <span class="n">filter_link</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">rest</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">f</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">first</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Link</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">first</span><span class="p">,</span> <span class="n">filtered_rest</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">filtered_rest</span>
</pre></table></code></div></div><h2 id="62-tree-class">6.2 Tree Class</h2><p>Tree是一个可以有多个<code class="language-plaintext highlighter-rouge">rest</code>的linked list</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Tree</span><span class="p">:</span>
    <span class="s">"""A tree is a label and a list of branches."""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">branches</span><span class="o">=</span><span class="p">[]):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>
        <span class="k">for</span> <span class="n">branch</span> <span class="ow">in</span> <span class="n">branches</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">branch</span><span class="p">,</span> <span class="n">Tree</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">branches</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">branches</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">branches</span><span class="p">:</span>
            <span class="n">branch_str</span> <span class="o">=</span> <span class="s">', '</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">branches</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">branch_str</span> <span class="o">=</span> <span class="s">''</span>
        <span class="k">return</span> <span class="s">'Tree({0}{1})'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">),</span> <span class="n">branch_str</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">indented</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">indented</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">branches</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">b</span><span class="p">.</span><span class="n">indented</span><span class="p">():</span>
                <span class="n">lines</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">'  '</span> <span class="o">+</span> <span class="n">line</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">)]</span> <span class="o">+</span> <span class="n">lines</span>

    <span class="k">def</span> <span class="nf">is_leaf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">.</span><span class="n">branches</span>
</pre></table></code></div></div><h1 id="7-scheme">7 Scheme</h1><p>Scheme是一种Lisp语言，由表达式组成，表达式包括</p><ul><li>原始表达式：2， 3.3， true， quotient等<li>组合表达式：(quotient 10 2)，(not true)</ul><p>括号表达式中的第一个是运算符，后面可以有0个或者多个算子</p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nv">&gt;</span> <span class="p">(</span><span class="nb">quotient</span> <span class="mi">10</span> <span class="mi">2</span><span class="p">)</span>
<span class="mi">5</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="nb">quotient</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">8</span> <span class="mi">7</span><span class="p">)</span> <span class="mi">5</span><span class="p">)</span>
<span class="mi">3</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">3</span>
        <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">2</span> <span class="mi">4</span><span class="p">)</span>
           <span class="p">(</span><span class="nb">+</span> <span class="mi">3</span> <span class="mi">5</span><span class="p">)))</span>
     <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">-</span> <span class="mi">10</span> <span class="mi">7</span><span class="p">)</span>
        <span class="mi">6</span><span class="p">))</span>
<span class="mi">57</span>
</pre></table></code></div></div><h2 id="71-special-forms">7.1 Special Forms</h2><p>一个不是call expression的组合式是<em>special form</em></p><ul><li><p><strong>If</strong>表达式：<code class="language-plaintext highlighter-rouge">(if &lt;predicate&gt; &lt;consequent&gt; &lt;alternative&gt;)</code></p><li><p><strong>And</strong>和<strong>or</strong>表达式：<code class="language-plaintext highlighter-rouge">(and &lt;e1&gt; ... &lt;e2&gt;)</code> <code class="language-plaintext highlighter-rouge">(or &lt;e1&gt; ... &lt;en&gt;)</code></p><li><p>Binding symbol：<code class="language-plaintext highlighter-rouge">(define &lt;symbol&gt; &lt;expression&gt;)</code></p><li><p>New procedure: <code class="language-plaintext highlighter-rouge">(define (&lt;symbol&gt; &lt;formal parameters&gt;) &lt;body&gt;)</code></p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">&gt;</span> <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nb">abs</span> <span class="nv">x</span><span class="p">)</span>
    <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">x</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">-</span> <span class="nv">x</span><span class="p">)</span>
        <span class="nv">x</span><span class="p">))</span>
</pre></table></code></div></div><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nv">&gt;</span> <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nb">sqrt</span> <span class="nv">x</span><span class="p">)</span>
    <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">update</span> <span class="nv">guess</span><span class="p">)</span>
      <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">=</span> <span class="p">(</span><span class="nf">square</span> <span class="nv">guess</span><span class="p">)</span> <span class="nv">x</span><span class="p">)</span>
          <span class="nv">guess</span>
          <span class="p">(</span><span class="nf">update</span> <span class="p">(</span><span class="nf">average</span> <span class="nv">guess</span> <span class="p">(</span><span class="nb">/</span> <span class="nv">x</span> <span class="nv">guess</span><span class="p">)))))</span>
    <span class="p">(</span><span class="nf">update</span> <span class="mi">1</span><span class="p">))</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="nb">sqrt</span> <span class="mi">256</span><span class="p">)</span>
<span class="mi">16</span>
</pre></table></code></div></div><li><p><strong>lambda表达式</strong>：匿名函数表达式 <code class="language-plaintext highlighter-rouge">(lambda (&lt;formal-parameters&gt;) &lt;body&gt;)</code></p><p>以下两个表达式相同</p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">plus4</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="mi">4</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">plus4</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="mi">4</span><span class="p">)))</span>
</pre></table></code></div></div><p>lambda表达式也可以作为call expression</p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">&gt;</span> <span class="p">((</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="nv">y</span> <span class="p">(</span><span class="nf">square</span> <span class="nv">z</span><span class="p">)))</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
<span class="mi">12</span>
</pre></table></code></div></div><li><p><strong>cond</strong>：相当于if elif else，<code class="language-plaintext highlighter-rouge">cond</code>后面可以接多个表达式，每个表达式中有一个predicate和一个body</p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="k">cond</span> <span class="p">((</span><span class="nb">&gt;</span> <span class="nv">x</span> <span class="mi">10</span><span class="p">)</span> <span class="p">(</span><span class="nf">print</span> <span class="ss">'big</span><span class="p">))</span>
      <span class="p">((</span><span class="nb">&gt;</span> <span class="nv">x</span> <span class="mi">5</span><span class="p">)</span>  <span class="p">(</span><span class="nf">print</span> <span class="ss">'medium</span><span class="p">))</span>
      <span class="p">(</span><span class="k">else</span>     <span class="p">(</span><span class="nf">print</span> <span class="ss">'small</span><span class="p">)))</span>
</pre></table></code></div></div><li><p><strong>begin</strong>：可以将多个表达式组合成一个表达式</p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="nv">x</span> <span class="mi">10</span><span class="p">)</span> <span class="p">(</span><span class="k">begin</span>
                <span class="p">(</span><span class="nf">print</span> <span class="ss">'big</span><span class="p">)</span>
              	<span class="p">(</span><span class="nf">print</span> <span class="ss">'guy</span><span class="p">))</span>
    		 <span class="p">(</span><span class="k">begin</span> 
              	<span class="p">(</span><span class="nf">print</span> <span class="ss">'small</span><span class="p">)</span>
              	<span class="p">(</span><span class="nf">print</span> <span class="ss">'fry</span><span class="p">)))</span>
</pre></table></code></div></div><li><p><strong>let</strong>：在一个表达式中暂时绑定一个值到一个symbol上</p><p><code class="language-plaintext highlighter-rouge">(let (&lt;binding&gt;) (&lt;expression&gt;))</code></p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="k">define</span> <span class="nv">c</span> <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">a</span> <span class="mi">3</span><span class="p">)</span>
                <span class="p">(</span><span class="nf">b</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">)))</span>
            	<span class="p">(</span><span class="nb">sqrt</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">a</span> <span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">b</span> <span class="nv">b</span><span class="p">)))))</span>
</pre></table></code></div></div><p>这个表达式之后，a和b的值还是不知道</p></ul><h2 id="72-scheme-lists">7.2 Scheme Lists</h2><ul><li><code class="language-plaintext highlighter-rouge">cons</code>: 一个拥有2个参数的用于构建linked list的函数<li><code class="language-plaintext highlighter-rouge">car</code>：返回list的第一个元素<li><code class="language-plaintext highlighter-rouge">cdr</code>：返回list的剩余元素<li><code class="language-plaintext highlighter-rouge">nil</code>：empty list<li><code class="language-plaintext highlighter-rouge">list</code>：新建一个list</ul><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1">;build a list with element 2 and points to null</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="k">define</span> <span class="nv">x</span> <span class="p">(</span><span class="nb">cons</span> <span class="mi">2</span> <span class="nv">nil</span><span class="p">))</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">x</span><span class="p">)</span>
<span class="mi">1</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="nb">cons</span> <span class="mi">1</span> <span class="p">(</span><span class="nb">cons</span> <span class="mi">2</span> <span class="p">(</span><span class="nb">cons</span> <span class="mi">3</span> <span class="nv">nil</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">1</span> <span class="p">(</span><span class="nb">list</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">(</span><span class="nf">1</span> <span class="p">(</span><span class="nf">2</span> <span class="mi">3</span><span class="p">)</span> <span class="mi">4</span><span class="nv">fil</span><span class="p">)</span>
</pre></table></code></div></div><p>可以用<code class="language-plaintext highlighter-rouge">eval</code>对scheme list求值</p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">&gt;</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'quotient</span> <span class="mi">10</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="nb">quotient</span> <span class="mi">10</span> <span class="mi">2</span><span class="p">)</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="nb">eval</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'quotient</span> <span class="mi">10</span> <span class="mi">2</span><span class="p">))</span>
<span class="mi">5</span>
</pre></table></code></div></div><h2 id="73-quote-and-quasiquote">7.3 Quote and quasiquote</h2><p><code class="language-plaintext highlighter-rouge">'</code>是quote标志，可以指代这个符号而不是这个符号所代表的值</p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nv">&gt;</span> <span class="p">(</span><span class="k">define</span> <span class="nv">a</span> <span class="mi">4</span><span class="p">)</span>
<span class="nv">&gt;</span> <span class="ss">'a</span>
<span class="nv">a</span>
<span class="nv">&gt;</span> <span class="nv">a</span>
<span class="mi">4</span>
</pre></table></code></div></div><p>`是quasiquote标志，与quote功能类似，但是可以用,进行unquote</p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nv">&gt;</span> <span class="p">(</span><span class="k">define</span> <span class="nv">b</span> <span class="mi">4</span><span class="p">)</span>
<span class="nv">&gt;</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="o">,</span><span class="p">(</span><span class="nb">+</span> <span class="nv">b</span> <span class="mi">1</span><span class="p">))</span>
<span class="p">(</span><span class="nf">a</span> <span class="p">(</span><span class="k">unquote</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">b</span> <span class="mi">1</span><span class="p">)))</span>
<span class="nv">&gt;</span> <span class="o">`</span><span class="p">(</span><span class="nf">a</span> <span class="o">,</span><span class="p">(</span><span class="nb">+</span> <span class="nv">b</span> <span class="mi">1</span><span class="p">))</span>
<span class="p">(</span><span class="nf">a,</span> <span class="mi">5</span><span class="p">)</span>
</pre></table></code></div></div><p><strong>用scheme实现while</strong></p><p>计算从2开始的所有偶数的平方和</p><p>python中</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">total</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">2</span>
</pre></table></code></div></div><p>scheme中</p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="k">begin</span>
 	<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">f</span> <span class="nv">x</span> <span class="nv">total</span><span class="p">)</span>
      <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">x</span> <span class="mi">10</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">f</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">total</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">)))</span>
          <span class="nv">total</span><span class="p">))</span>
 	<span class="p">(</span><span class="nf">f</span> <span class="mi">2</span> <span class="mi">0</span><span class="p">))</span>
</pre></table></code></div></div><h1 id="8-optional-tail-recursion">8 (Optional) Tail Recursion</h1><h2 id="81-functional-programming">8.1 Functional Programming</h2><ul><li>所有的函数都是纯函数，返回一个数值，中间没有任何副作用<li>没有重新赋值和可变数据类型，因此没有<code class="language-plaintext highlighter-rouge">for</code>或者<code class="language-plaintext highlighter-rouge">while</code>（过程中会对变量重新赋值）<li>键值绑定是永久的</ul><p>优点：</p><ul><li>一个表达式的值和子表达式的执行顺序无关<li>子表达式可以并行求值或者惰性求值<li><em>Referential transparency</em>：可以将任意的表达式直接替换为这个表达式的值（因为所有函数都是纯函数）</ul><h2 id="82-tail-calls">8.2 Tail calls</h2><p>在python进行递归调用时，会生成很多函数栈帧，因此空间复杂度为O(n)。这些栈帧可能只是被使用了很短的一段时间，但可能会造成栈溢出，而<em>properly tail recursive</em>的语言可以实现进行尾递归调用时空间复杂度为O(1)。</p><p>为什么一定需要尾调用这个限制？因为在函数中间的调用如果没有栈帧的话，可能会对当前环境产生影响，从而影响函数中调用之后的代码正确性，因此一定要等到整个函数都执行完毕之后，在最后一个子表达式才能进行栈帧优化。</p><p><strong>尾调用</strong>：在<em>tail context</em>中的call expression</p><p>tail context: <code class="language-plaintext highlighter-rouge">lambda</code>表达式body中的最后一个子表达式</p><p>如果一个if表达式在tail context中，那么这个if表达式中的&lt;body&gt;和<alternative>也在tail context中</alternative></p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">factorial</span> <span class="nv">n</span> <span class="nv">k</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">=</span> <span class="nv">n</span> <span class="mi">0</span><span class="p">)</span> <span class="nv">k</span>
      <span class="p">(</span><span class="nf">factorial</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">n</span> <span class="mi">1</span><span class="p">)</span>
                 <span class="p">(</span><span class="nb">*</span> <span class="nv">k</span> <span class="nv">n</span><span class="p">))))</span>
</pre></table></code></div></div><p>上述例子中，<code class="language-plaintext highlighter-rouge">k</code>和<code class="language-plaintext highlighter-rouge">(factorial (- n 1) (* k n))</code>都在tail context里</p><p>所有的在tail context中的<code class="language-plaintext highlighter-rouge">cond</code>表达式中的不是predicate的子表达式也都是尾调用</p><p><strong>注意</strong>：如果尾调用表达式中还有一个子表达式，且这个尾调用表达式需要计算，那么这个子表达式不是尾调用（因为得到子表达式的值之后还需要进行计算，因此子表达式并不是最后一步）</p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nb">length</span> <span class="nv">s</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">null?</span> <span class="nv">s</span><span class="p">)</span> <span class="mi">0</span>
      <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="p">(</span><span class="nb">length</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">s</span><span class="p">)))))</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">(+1 (length (cdr s)))</code>是尾调用，而<code class="language-plaintext highlighter-rouge">(length (cdr s))</code>不是，为了把它变成尾调用</p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">length-tail</span> <span class="nv">s</span><span class="p">)</span>
  <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">length-iter</span> <span class="nv">s</span> <span class="nv">n</span><span class="p">)</span>
    <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">null?</span> <span class="nv">s</span><span class="p">)</span> <span class="nv">n</span>
        <span class="p">(</span><span class="nf">length-iter</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">s</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="nv">n</span><span class="p">))))</span>
  <span class="p">(</span><span class="nf">length-iter</span> <span class="nv">s</span> <span class="mi">0</span><span class="p">))</span>
</pre></table></code></div></div><h2 id="83-tail-recursion">8.3 Tail Recursion</h2><p>函数的尾调用是调用这个函数本身，这就是一个尾递归</p><p>以下面的scheme函数为例</p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">sum</span> <span class="nv">n</span> <span class="nv">total</span><span class="p">)</span>
      	<span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">zero?</span> <span class="nv">n</span><span class="p">)</span> <span class="nv">total</span>
        <span class="p">(</span><span class="nf">sum</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">n</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">n</span> <span class="nv">total</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">sum</span> <span class="mi">1001</span> <span class="mi">0</span><span class="p">)</span>
</pre></table></code></div></div><p>开启了尾递归优化的情况下：在对<code class="language-plaintext highlighter-rouge">(sum 1001 0)</code>进行求值时，对<code class="language-plaintext highlighter-rouge">sum</code>进行eval，因为sum在env中已经被定义，因此替换为前面的define的LambdaProcedure对象。然后分别对1001和0进行scheme_eval后将这两个参数scheme_apply到sum这个LambdaProcedure中，此时创建了一个新的env，绑定参数为{n:1001, total:0}，父环境为global，然后对sum函数体中的所有表达式（就只有1个）进行eval_all，而因为这个表达式的rest为nil，因此是在tail context中的，会返回一个Thunk，其环境为{n:1001, total:0}，表达式为sum的body，此时将返回到最开始的<code class="language-plaintext highlighter-rouge">(sum 1001 0)</code>的eval的循环中，因为返回的是一个Thunk，因此还需要对这个Thunk进行求值</p><p>对Thunk调用eval，最先解析的是if表达式，跳转到<code class="language-plaintext highlighter-rouge">do_if_form</code>，判断<code class="language-plaintext highlighter-rouge">(zero? n)</code>，发现应当跳转到alternative表达式，注意，此时的alternative表达式处在tail context中，因此不会立即进行求值跳转到新的栈帧，而是会返回一个Thunk，这个Thunk的环境还是父环境为global，表达式为<code class="language-plaintext highlighter-rouge">(sum (- n 1) (+ n total))</code>，再次返回到global环境中</p><p>因为返回的还是Thunk，因此需要继续对这个Thunk进行求值，对上述表达式的所有参数进行eval之后得到对sum进行apply的参数1000和1001，然后创建一个新的子环境。注意：因为此时环境还是global，因此创建的新的环境的父环境是global，而不是之前的{n:1001, total: 0}的环境，这里可以看出<strong>Thunk的作用：将尾调用时的环境和参数保存，然后返回到global环境，再从global环境中对这个Thunk进行求值，这样可以避免直接在子环境中新创建另一个子环境，造成栈帧的递归</strong></p><h1 id="9-macro">9 Macro</h1><p>Macro和procedure的区别在于，procedure先对其参数进行求值，然后将这些值apply到这个precedure中，而macro则直接将参数apply，然后对body进行求值，比如</p><div class="language-scheme highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="nf">define-macro</span> <span class="p">(</span><span class="nf">twice</span> <span class="nv">expr</span><span class="p">)</span>
              <span class="p">(</span><span class="nb">list</span> <span class="ss">'begin</span> <span class="nv">expr</span> <span class="nv">expr</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">twice2</span> <span class="nv">expr</span><span class="p">)</span>
  		<span class="p">(</span><span class="nb">list</span> <span class="ss">'begin</span> <span class="nv">expr</span> <span class="nv">expr</span><span class="p">))</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="nf">twice</span> <span class="p">(</span><span class="nf">print</span> <span class="mi">2</span><span class="p">))</span>
<span class="mi">2</span>
<span class="mi">2</span>
<span class="nv">&gt;</span> <span class="p">(</span><span class="nf">twice2</span> <span class="p">(</span><span class="nf">print</span> <span class="mi">2</span><span class="p">))</span>
<span class="mi">2</span>
<span class="p">(</span><span class="k">begin</span> <span class="nv">undefined</span> <span class="nv">undefined</span><span class="p">)</span>
</pre></table></code></div></div><h1 id="10-sql">10 SQL</h1><h2 id="101-declarative-programming-definition">10.1 Declarative Programming Definition</h2><ul><li><em>declatative languages</em>：一个程序是对希望得到的结果的描述，怎样得到结果是由解释器负责的。申诉式语言包括SQL、Prolog等<li><em>imperative languages</em>：一个程序是对计算过程的描述，解释器负责执行这些计算过程。命令式语言包括Python、C等</ul><pre><code class="language-SQL">create table cities as
	select 38 as latitude, 122 as longtitude, "Berkeley" as name union
	select 42,             71,                "Cambridge"        union
	select 45,             93,                "Minneapolis";
</code></pre><p>cities:</p><div class="table-wrapper"><table><thead><tr><th>Latitude<th>Longtitude<th>Name<tbody><tr><td>38<td>122<td>Berkeley<tr><td>42<td>71<td>Cambridge<tr><td>45<td>93<td>Minneapolis</table></div><h2 id="102-sql-intro">10.2 SQL Intro</h2><p>每个SQL语句用<code class="language-plaintext highlighter-rouge">;</code>结尾</p><p><code class="language-plaintext highlighter-rouge">select</code>创建一个新的表，<code class="language-plaintext highlighter-rouge">create table</code>给这个表一个全局名称</p><p>列描述：<code class="language-plaintext highlighter-rouge">select [expression] as [name]</code> 列描述中的<code class="language-plaintext highlighter-rouge">as</code>和列名称<code class="language-plaintext highlighter-rouge">[name]</code>都是可选的</p><p><code class="language-plaintext highlighter-rouge">select</code>创建一个一行的表，但是可以用<code class="language-plaintext highlighter-rouge">union</code>来将多个行合并为一个表格</p><p>除了创建新的表之外，<code class="language-plaintext highlighter-rouge">select</code>还可以对已有的表进行操作，使用<code class="language-plaintext highlighter-rouge">from</code>来指定表。可以用<code class="language-plaintext highlighter-rouge">where</code>来过滤输入的表中的某些行，也可以用<code class="language-plaintext highlighter-rouge">order by</code>来确定这些行的排序方式</p><div class="language-sql highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">select</span> <span class="p">[</span><span class="n">columns</span><span class="p">]</span> <span class="k">from</span> <span class="p">[</span><span class="k">table</span><span class="p">]</span> <span class="k">where</span> <span class="p">[</span><span class="n">condition</span><span class="p">]</span> <span class="k">order</span> <span class="k">by</span> <span class="p">[</span><span class="k">order</span><span class="p">];</span>
</pre></table></code></div></div><p><strong>select表达式中的算数</strong></p><div class="language-sql highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">create</span> <span class="k">table</span> <span class="n">lift</span> <span class="k">as</span>
  <span class="k">select</span> <span class="mi">101</span> <span class="k">as</span> <span class="n">chair</span><span class="p">,</span> <span class="mi">2</span> <span class="k">as</span> <span class="n">single</span><span class="p">,</span> <span class="mi">2</span> <span class="k">as</span> <span class="n">couple</span> <span class="k">union</span>
  <span class="k">select</span> <span class="mi">102</span>         <span class="p">,</span> <span class="mi">0</span>          <span class="p">,</span> <span class="mi">3</span>           <span class="k">union</span>
  <span class="k">select</span> <span class="mi">103</span>         <span class="p">,</span> <span class="mi">4</span>          <span class="p">,</span> <span class="mi">1</span><span class="p">;</span>

<span class="k">select</span> <span class="n">chair</span><span class="p">,</span> <span class="n">single</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">couple</span> <span class="k">as</span> <span class="n">total</span> <span class="k">from</span> <span class="n">lift</span><span class="p">;</span>
</pre></table></code></div></div><div class="table-wrapper"><table><thead><tr><th>chair<th>total<tbody><tr><td>101<td>6<tr><td>102<td>6<tr><td>103<td>6</table></div><h2 id="103-table">10.3 Table</h2><p><strong>合并表格</strong></p><div class="language-sql highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="c1">-- Parents</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">parents</span> <span class="k">AS</span>
  <span class="k">SELECT</span> <span class="nv">"abraham"</span> <span class="k">AS</span> <span class="n">parent</span><span class="p">,</span> <span class="nv">"barack"</span> <span class="k">AS</span> <span class="n">child</span> <span class="k">UNION</span>
  <span class="k">SELECT</span> <span class="nv">"abraham"</span>          <span class="p">,</span> <span class="nv">"clinton"</span>         <span class="k">UNION</span>
  <span class="k">SELECT</span> <span class="nv">"delano"</span>           <span class="p">,</span> <span class="nv">"herbert"</span>         <span class="k">UNION</span>
  <span class="k">SELECT</span> <span class="nv">"fillmore"</span>         <span class="p">,</span> <span class="nv">"abraham"</span>         <span class="k">UNION</span>
  <span class="k">SELECT</span> <span class="nv">"fillmore"</span>         <span class="p">,</span> <span class="nv">"delano"</span>          <span class="k">UNION</span>
  <span class="k">SELECT</span> <span class="nv">"fillmore"</span>         <span class="p">,</span> <span class="nv">"grover"</span>          <span class="k">UNION</span>
  <span class="k">SELECT</span> <span class="nv">"eisenhower"</span>       <span class="p">,</span> <span class="nv">"fillmore"</span><span class="p">;</span>

<span class="c1">-- Fur</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">dogs</span> <span class="k">AS</span>
  <span class="k">SELECT</span> <span class="nv">"abraham"</span> <span class="k">AS</span> <span class="n">name</span><span class="p">,</span> <span class="nv">"long"</span> <span class="k">AS</span> <span class="n">fur</span> <span class="k">UNION</span>
  <span class="k">SELECT</span> <span class="nv">"barack"</span>         <span class="p">,</span> <span class="nv">"short"</span>       <span class="k">UNION</span>
  <span class="k">SELECT</span> <span class="nv">"clinton"</span>        <span class="p">,</span> <span class="nv">"long"</span>        <span class="k">UNION</span>
  <span class="k">SELECT</span> <span class="nv">"delano"</span>         <span class="p">,</span> <span class="nv">"long"</span>        <span class="k">UNION</span>
  <span class="k">SELECT</span> <span class="nv">"eisenhower"</span>     <span class="p">,</span> <span class="nv">"short"</span>       <span class="k">UNION</span>
  <span class="k">SELECT</span> <span class="nv">"fillmore"</span>       <span class="p">,</span> <span class="nv">"curly"</span>       <span class="k">UNION</span>
  <span class="k">SELECT</span> <span class="nv">"grover"</span>         <span class="p">,</span> <span class="nv">"short"</span>       <span class="k">UNION</span>
  <span class="k">SELECT</span> <span class="nv">"herbert"</span>        <span class="p">,</span> <span class="nv">"curly"</span><span class="p">;</span>
  
<span class="c1">-- Parents of curly dogs</span>
<span class="k">SELECT</span> <span class="n">parent</span> <span class="k">FROM</span> <span class="n">parents</span><span class="p">,</span> <span class="n">dogs</span> <span class="k">WHERE</span> <span class="n">child</span> <span class="o">=</span> <span class="n">name</span> <span class="k">AND</span> <span class="n">fur</span> <span class="o">=</span> <span class="nv">"curly"</span><span class="p">;</span>
</pre></table></code></div></div><p><strong>Alias and Dot Expression</strong></p><p>当2个表格有相同的列名称时，可以用alias和<code class="language-plaintext highlighter-rouge">.</code>进行区分</p><p>筛选parents表格中拥有同一个parent的child</p><div class="language-sql highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c1">-- Siblings</span>
<span class="k">SELECT</span> <span class="n">a</span><span class="p">.</span><span class="n">child</span> <span class="k">AS</span> <span class="k">first</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">child</span> <span class="k">AS</span> <span class="k">second</span>
  <span class="k">FROM</span> <span class="n">parents</span> <span class="k">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">parents</span> <span class="k">AS</span> <span class="n">b</span>
  <span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">parent</span> <span class="k">AND</span> <span class="n">a</span><span class="p">.</span><span class="n">child</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">child</span><span class="p">;</span>
</pre></table></code></div></div><p>这里的<code class="language-plaintext highlighter-rouge">from parents as a, parents as b</code>是将2个相同的parents表格进行合并，并且给了不同的别名a和b，<code class="language-plaintext highlighter-rouge">a.child</code>指代第一个parents表格中的child列，<code class="language-plaintext highlighter-rouge">b.child</code>指代第二个parents表格中的child列</p><div class="table-wrapper"><table><thead><tr><th>first<th>second<tbody><tr><td>barack<td>clinton<tr><td>abraham<td>delano<tr><td>abraham<td>grover<tr><td>delano<td>grover</table></div><p><strong>String Expressions</strong></p><p><code class="language-plaintext highlighter-rouge">||</code>字符串连接符号</p><div class="language-sql highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="o">&gt;</span> <span class="k">select</span> <span class="nv">"hello,"</span> <span class="o">||</span> <span class="nv">" world"</span><span class="p">;</span>
<span class="n">hello</span><span class="p">,</span> <span class="n">world</span>
</pre></table></code></div></div><p>SQL的index从1开始</p><p><code class="language-plaintext highlighter-rouge">substr(str, start, len)</code>：从index=start开始长度为len的子字符串</p><div class="language-sql highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="o">&gt;</span> <span class="k">create</span> <span class="k">table</span> <span class="n">phrase</span> <span class="k">as</span> <span class="k">select</span> <span class="nv">"hello, world"</span> <span class="k">as</span> <span class="n">s</span><span class="p">;</span>
<span class="o">&gt;</span> <span class="k">select</span> <span class="n">substr</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">||</span> <span class="n">substr</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">instr</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nv">" "</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">from</span> <span class="n">phrase</span><span class="p">;</span>
<span class="n">low</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/lecture-notes/'>lecture notes</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/others/" class="post-tag no-text-decoration" >Others</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=UCB CS61A Lecture Notes - Xiao Fan (樊潇)&url=https://tommyfan34.github.io/posts/CS61A-notes/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=UCB CS61A Lecture Notes - Xiao Fan (樊潇)&u=https://tommyfan34.github.io/posts/CS61A-notes/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=UCB CS61A Lecture Notes - Xiao Fan (樊潇)&url=https://tommyfan34.github.io/posts/CS61A-notes/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/GAMES101/">GAMES101 Lecture Notes</a><li><a href="/posts/leetcode-notes/">Leetcode Notes</a><li><a href="/posts/LIS-Problem/">LIS Problem</a><li><a href="/posts/Monotone-Stack-Problem/">Monotone Stack Problem</a><li><a href="/posts/CS61B-notes/">UCB CS61B Lecture Notes</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/leetcode/">leetcode</a> <a class="post-tag" href="/tags/others/">Others</a> <a class="post-tag" href="/tags/computer-graphics/">Computer Graphics</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/CS61B-notes/"><div class="card-body"> <span class="timeago small" > Apr 16, 2021 <i class="unloaded">2021-04-16T17:09:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>UCB CS61B Lecture Notes</h3><div class="text-muted small"><p> 1 Introduction CS61B Spring 2018课程网址: https://sp18.datastructur.es/ 推荐的Java参考书：Head First Java 1.1 Java Intro Java是一门静态类型编译型的语言，源文件类型为.java，经过javac编译器将其编译为.class文件，此时.class文件是已经经过类型检查的，再用java解释...</p></div></div></a></div><div class="card"> <a href="/posts/MIT-6-null-notes/"><div class="card-body"> <span class="timeago small" > Jan 14, 2021 <i class="unloaded">2021-01-14T18:32:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MIT 6.null Lecture Notes</h3><div class="text-muted small"><p> Lecture 1 Shell bash中如果想提供一个包含空格的参数，可以用‘或”“把它们引起来，或者用转义字符\，比如My\ Photos来将空格转义 $PATH是环境变量，即在本地文件夹下没有找到对应可以执行的程序时会自动在环境变量的路径中寻找相应的程序。which提示了能够运行本指令的程序路径，比如 ~$ which echo /bin...</p></div></div></a></div><div class="card"> <a href="/posts/MIT-6S081-notes/"><div class="card-body"> <span class="timeago small" > Mar 2, 2021 <i class="unloaded">2021-03-02T17:44:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MIT 6.S081 Lecture Notes</h3><div class="text-muted small"><p> 课程网址：https://pdos.csail.mit.edu/6.S081/2020/index.html 我的lab实现的github repo：https://github.com/tommyfan34/MIT_6S081 Lecture 1 Introduction 操作系统应该提供的功能：1. 多进程支持 2. 进程间隔离 3. 受控制的进程间通信 xv6：...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/MIT-6S081-notes/" class="btn btn-outline-primary"><p>MIT 6.S081 Lecture Notes</p></a> <a href="/posts/CS61B-notes/" class="btn btn-outline-primary"><p>UCB CS61B Lecture Notes</p></a></div><div id="comments"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script> <script src='//lib.baomitu.com/valine/latest/Valine.min.js'></script> <script> new Valine({ av: AV, el: '#comments', app_id: 'wp6tzj2sW35FoU9QTAMVl64h-gzGzoHsz', app_key: 'rEv50Y8WsRaFC3Um1ccmOBHD', placeholder: '对FX说些什么吧...', notify: 'true', verify: 'true', avatar: 'mp', recordIP: 'true', enableQQ: 'true', }) </script> </br></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/tommyfan34">Xiao Fan</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/leetcode/">leetcode</a> <a class="post-tag" href="/tags/others/">Others</a> <a class="post-tag" href="/tags/computer-graphics/">Computer Graphics</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script> <script> $(function() { let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://tommyfan34.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
